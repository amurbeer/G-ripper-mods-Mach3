Берем файл M650.m1s и меняем оригинал в папке mach3 макросов. В файле прописываем куда сканировать поверхность (Dim FileName : FileName = "c:\Mach3\Probe_Scan_Data\ProbeData.txt" ' patch ), там это строка уже есть. Запускаем модифицированный файл G-Code_Ripper_mod.exe, в котором было изменено формирование выходного файла для сканирования пробника с использованием функции M650.
Выбираем  Settings и устанавливаем нужные единицы измерений. В основном окне постпроцессор mach3, G-code режим Autoprobe. Теперь при экспорте файла для пробника, будет создан правильный g-code для этой платы. Переменные из g-code ripper корректно работают и передаются в файл сканирования. P.S. я давно столкнулся с этой проблемой, и ранее ее решил простым способом, пробник при касании поверхности должен послать в станок не постоянный сигнал, а запустить генератор импульсов, примерно длина 0.2 секунды, пауза 0.9 сек, в этом режиме станок прекрасно сканирует поверхность. Была собрана дополнительная плата формирующая сигнал от самодельного пробника. Почему я пришел к этому решению? Потому что есть как раз промышленные пробники которые и формируют такой сигнал. Но спустя время, я приобрел другой пробник и пришлось докопаться до истины и родить решение которое вам и предоставляю.
